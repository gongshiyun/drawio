<mxfile host="app.diagrams.net" modified="2021-02-05T08:56:51.855Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.96 Safari/537.36 Edg/88.0.705.50" etag="ffAqAeOCjL8XcGzwTMRt" version="14.2.9" type="github">
  <diagram id="a7K1OrMy-mYx28GRE5xp" name="第 1 页">
    <mxGraphModel dx="1422" dy="772" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;sketch=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-2" target="7iyE1nCS1IbG5LI7RIwc-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-2" value="NbsAudioServer" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=4;hachureGap=8;hachureAngle=45;sketch=0;shadow=0;" vertex="1" parent="1">
          <mxGeometry x="291" y="120" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;sketch=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-3" target="7iyE1nCS1IbG5LI7RIwc-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;sketch=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-3">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="600" y="170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-3" value="NettyReadHandler" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=4;hachureGap=8;hachureAngle=45;sketch=0;shadow=0;" vertex="1" parent="1">
          <mxGeometry x="291" y="260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-5" value="启动Netty服务" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;sketch=0;shadow=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="325" y="210" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;sketch=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-6" target="7iyE1nCS1IbG5LI7RIwc-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-6" value="音箱" style="ellipse;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=2;hachureGap=8;fillStyle=dots;sketch=0;shadow=0;" vertex="1" parent="1">
          <mxGeometry x="550" y="260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-8" value="鉴权请求/报文回复" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;sketch=0;shadow=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="415" y="270" width="110" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;sketch=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-9" target="7iyE1nCS1IbG5LI7RIwc-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-9" value="webServer" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=4;hachureGap=8;hachureAngle=45;sketch=0;shadow=0;" vertex="1" parent="1">
          <mxGeometry x="70" y="260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-11" value="RPC播放请求" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;sketch=0;shadow=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="190" y="260" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;sketch=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-12" target="7iyE1nCS1IbG5LI7RIwc-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-21" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;sketch=0;shadow=0;exitX=0.75;exitY=1;exitDx=0;exitDy=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-12" target="7iyE1nCS1IbG5LI7RIwc-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-24" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;sketch=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-12" target="7iyE1nCS1IbG5LI7RIwc-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;sketch=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-12" target="7iyE1nCS1IbG5LI7RIwc-30">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="120" y="530" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-12" value="Handler" style="whiteSpace=wrap;html=1;rounded=1;strokeWidth=2;sketch=0;fillWeight=4;hachureGap=8;hachureAngle=45;shadow=0;" vertex="1" parent="1">
          <mxGeometry x="291" y="400" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-14" value="如果没有handler就创建Handler线程并执行" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;sketch=0;shadow=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="350" y="350" width="240" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-18" value="收到设备发送的鉴权请求，&lt;br&gt;发送audio_play_start信令" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;sketch=0;shadow=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="450" y="435" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;shadow=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-20" target="7iyE1nCS1IbG5LI7RIwc-45">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="300" y="660" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;shadow=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-20" target="7iyE1nCS1IbG5LI7RIwc-49">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="400" y="670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;shadow=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-20" target="7iyE1nCS1IbG5LI7RIwc-53">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="400" y="670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-58" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;shadow=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-20" target="7iyE1nCS1IbG5LI7RIwc-59">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="390" y="670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;shadow=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-20" target="7iyE1nCS1IbG5LI7RIwc-63">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="480" y="670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-73" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;shadow=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-20" target="7iyE1nCS1IbG5LI7RIwc-74">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-20" value="线程中while循环轮询播放状态" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;rounded=1;strokeWidth=2;sketch=0;fillWeight=4;hachureGap=8;hachureAngle=45;shadow=0;" vertex="1" parent="1">
          <mxGeometry x="450" y="550" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0.45;exitY=0.913;exitDx=0;exitDy=0;exitPerimeter=0;sketch=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-23" target="7iyE1nCS1IbG5LI7RIwc-30">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-23" value="音频数据buffer数组" style="shape=document;whiteSpace=wrap;html=1;boundedLbl=1;rounded=1;strokeWidth=2;sketch=0;fillWeight=4;hachureGap=8;hachureAngle=45;shadow=0;" vertex="1" parent="1">
          <mxGeometry x="40" y="390" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-27" value="使用多个map维护streamId与播放任务相关的信息" style="shape=document;whiteSpace=wrap;html=1;boundedLbl=1;sketch=0;shadow=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="540" y="100" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-30" value="timerSendTask" style="whiteSpace=wrap;html=1;rounded=1;strokeWidth=2;sketch=0;fillWeight=4;hachureGap=8;hachureAngle=45;shadow=0;" vertex="1" parent="1">
          <mxGeometry x="150" y="550" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-39" value="&lt;span&gt;循环读取素材音频&lt;br&gt;信息到buffer中&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;sketch=0;shadow=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="170" y="400" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-43" value="每隔1s读取buffer&lt;br&gt;数据发送给设备" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;sketch=0;shadow=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="50" y="510" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-45" target="7iyE1nCS1IbG5LI7RIwc-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-45" value="PLAY" style="ellipse;whiteSpace=wrap;html=1;shadow=0;sketch=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="250" y="670" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-47" value="&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(248 , 249 , 250) ; display: inline ; float: none&quot;&gt;读取素材音频&lt;/span&gt;&lt;br style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(248 , 249 , 250)&quot;&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(248 , 249 , 250) ; display: inline ; float: none&quot;&gt;信息到buffer中&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;shadow=0;sketch=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="60" y="700" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-50" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-49" target="7iyE1nCS1IbG5LI7RIwc-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-49" target="7iyE1nCS1IbG5LI7RIwc-53">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-49" value="PAUSE" style="ellipse;whiteSpace=wrap;html=1;shadow=0;sketch=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="770" y="670" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-51" value="发送暂停信令" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;shadow=0;sketch=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="737" y="460" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;shadow=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-53" target="7iyE1nCS1IbG5LI7RIwc-57">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="565" y="770" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-53" value="NULL" style="ellipse;whiteSpace=wrap;html=1;shadow=0;sketch=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="640" y="670" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-55" value="状态置为NULL" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;shadow=0;sketch=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="700" y="710" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-57" value="do nothing" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;shadow=0;sketch=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="620" y="770" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-68" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-59" target="7iyE1nCS1IbG5LI7RIwc-67">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-59" value="STOP" style="ellipse;whiteSpace=wrap;html=1;shadow=0;sketch=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="350" y="670" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-60" value="&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(248 , 249 , 250) ; display: inline ; float: none&quot;&gt;初始化scheduledThreadPool线程池，启动定时线程&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;sketch=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="231" y="510" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-70" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-63" target="7iyE1nCS1IbG5LI7RIwc-69">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="485" y="860" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-63" value="RESUME" style="ellipse;whiteSpace=wrap;html=1;shadow=0;sketch=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="445" y="670" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-67" value="关闭&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;scheduledThreadPool线程池，退出while循环&lt;/span&gt;" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;shadow=0;sketch=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="315" y="770" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-71" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-69" target="7iyE1nCS1IbG5LI7RIwc-45">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="290" y="860" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-69" value="关闭&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;scheduledThreadPool线程池，关闭&lt;/span&gt;&lt;span&gt;timerSendTask&lt;/span&gt;" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;shadow=0;sketch=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="315" y="840" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-72" value="状态置为PLAY" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;shadow=0;sketch=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="201" y="760" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-74" target="7iyE1nCS1IbG5LI7RIwc-45">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="580" y="920" />
              <mxPoint x="290" y="920" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-74" value="UPDATE" style="ellipse;whiteSpace=wrap;html=1;shadow=0;sketch=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="540" y="670" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-77" value="设置进度，状态置为PLAY" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;sketch=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="440" y="920" width="150" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-79" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;sketch=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-80" target="7iyE1nCS1IbG5LI7RIwc-83">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-135" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-80" target="7iyE1nCS1IbG5LI7RIwc-134">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-139" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-80" target="7iyE1nCS1IbG5LI7RIwc-95">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-143" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-80" target="7iyE1nCS1IbG5LI7RIwc-86">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1570" y="328" />
              <mxPoint x="1570" y="369" />
              <mxPoint x="1740" y="369" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-80" value="NbsAudioServer" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=4;hachureGap=8;hachureAngle=45;sketch=0;shadow=0;" vertex="1" parent="1">
          <mxGeometry x="1361" y="267.5" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-81" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;sketch=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-83" target="7iyE1nCS1IbG5LI7RIwc-95">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-83" value="NettyReadHandler" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=4;hachureGap=8;hachureAngle=45;sketch=0;shadow=0;" vertex="1" parent="1">
          <mxGeometry x="1440" y="410" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-84" value="1.启动Netty服务" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;sketch=0;shadow=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1450" y="350" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-85" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;sketch=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-86" target="7iyE1nCS1IbG5LI7RIwc-83">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-86" value="音箱" style="ellipse;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=2;hachureGap=8;fillStyle=dots;sketch=0;shadow=0;" vertex="1" parent="1">
          <mxGeometry x="1680" y="410" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-87" value="5.鉴权请求/报文回复" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;sketch=0;shadow=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1565" y="420" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-88" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;sketch=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-89" target="7iyE1nCS1IbG5LI7RIwc-80">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-136" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-89" target="7iyE1nCS1IbG5LI7RIwc-80">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-89" value="浏览器" style="rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=4;hachureGap=8;hachureAngle=45;sketch=0;shadow=0;" vertex="1" parent="1">
          <mxGeometry x="1080" y="267.5" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-90" value="2.WebSocket建立连接，鉴权" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;sketch=0;shadow=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1200" y="260" width="170" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-91" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;sketch=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-95" target="7iyE1nCS1IbG5LI7RIwc-86">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1150" y="560" />
              <mxPoint x="1740" y="560" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-147" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;shadow=0;strokeWidth=2;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-95" target="7iyE1nCS1IbG5LI7RIwc-148">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1280" y="730" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1150" y="660" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-95" value="实时采播Handler" style="whiteSpace=wrap;html=1;rounded=1;strokeWidth=2;sketch=0;fillWeight=4;hachureGap=8;hachureAngle=45;shadow=0;" vertex="1" parent="1">
          <mxGeometry x="1090" y="410" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-96" value="6.如果StreamId没有handler，且&lt;br&gt;对应的播放类型为实时MIC采播，&lt;br&gt;创建Handler线程并执行" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;sketch=0;shadow=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1236" y="440" width="190" height="50" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-97" value="7.发送audio_play_start信令" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;sketch=0;shadow=0;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1370" y="565" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-134" value="1.map维护Session与streamId关系&lt;br&gt;2.map维护streamId与音频格式关系&lt;br&gt;3.map维护streamId与设备对应关系&lt;br&gt;4.维护其他关系" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;rounded=1;shadow=0;strokeWidth=2;sketch=0;fillWeight=4;hachureGap=8;hachureAngle=45;" vertex="1" parent="1">
          <mxGeometry x="1590" y="267.5" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-137" value="8.发送音频数据" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="1220" y="320" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-138" value="3" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="1510" y="270" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-140" value="9.音频数据作为传参调用Handler方法" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="1175" y="370" width="210" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-144" value="4.发送服务器信息" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="1585" y="370" width="110" height="20" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-149" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;shadow=0;strokeWidth=2;" edge="1" parent="1" source="7iyE1nCS1IbG5LI7RIwc-148" target="7iyE1nCS1IbG5LI7RIwc-86">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-148" value="map获取音频格式，&lt;br&gt;转换为设备支持的音频数据" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;rounded=1;shadow=0;strokeWidth=2;sketch=0;fillWeight=4;hachureGap=8;hachureAngle=45;" vertex="1" parent="1">
          <mxGeometry x="1345" y="630" width="215" height="60" as="geometry" />
        </mxCell>
        <mxCell id="7iyE1nCS1IbG5LI7RIwc-150" value="发送音频数据给设备" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="1630" y="660" width="120" height="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
